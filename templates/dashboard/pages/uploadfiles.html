{{{{raw-helper}}}}
{{{{/raw-helper}}}}
{{> header}}
<div class='upload-files'>
    <div class='upload-files-content'>
    </div>
    <div class="form-group">
    	  <form action="" id="myform">
           <div class="row">
               <div class="col-sm-3">
                 <select class="form-control" id="typeofdocument">
                  <option value="License">License</option>
                  <option value="Photo">Photo</option>
                  <option value="LoadDoc">Load doc</option>
                  <option value="UnloadDoc">Unload doc</option>
                  <option value="Other">Other</option>
                </select>
              </div>
              <div class="col-sm-9">
           			<input type="file" id="keyName" class="file" name="photos" multiple/>
           			<input type='submit' value='Upload' />
              </div>
            </div>
   		</form>  
    </div>
</div> 
{{{{raw-helper}}}}
<script id="grid-row-template-details" type="text/x-handlebars-template">
  <div class="container-fluid">
    <div class="row grid-row">
	    <div class="col-sm-12 grid-row-container">
        <div class="col-sm-2">
           <span class="file-other-icon"><i class="fa fa-file-photo-o text-danger"></i></span>
        </div>
       <div class="col-sm-8">{{originalname}}
            <br/>{{typeofdocument}}
       </div>
       <div class="col-sm-2">
          <button type="button" class="btn btn-default" aria-label="Left Align" id="actiondelete">
           <span class="fa fa-trash-o fa-lg" aria-hidden="true" id="actiondelete"></span>
       </button>
        <button type="button" class="btn btn-default" aria-label="Left Align" id="actiondownload">
           <span class="fa fa-download fa-lg" aria-hidden="true" id="actiondownload"></span>
       </button>
       </div>
      </div>
   </div>
 </div>
</script>
{{{{/raw-helper}}}}
{{{{raw-helper}}}}
<script type="text/javascript">
    console.log("template data",UTILS.getCurrentTemplateData()),$(function(){$("#myform").on("submit",function(e){e.preventDefault();var o=UTILS.getCurrentTemplateData(),t=new FormData(this);t.append("photo",t);var i={};i.formData=t,i.uri="files/service/fileupload",i.extraHref="id="+o.id+"&type="+$("#typeofdocument").val(),i.type="POST",API_HELPER.uploadFiles(i,function(e,o){return e?void console.log("error",e):void location.reload()})})}),$(document).ready(function(){var e=UTILS.getCurrentTemplateData();console.log("uploadfiles"),console.log(e);new GRID_HELPER.GRID(".upload-files-content",{gridData:e,gridId:"gridUploadFiles",rowConfig:{template:"grid-row-template-details",optionsPostRender:function(e,o){},click:function(){if("actiondelete"==arguments[0].target.id){var e={};e.formData=JSON.stringify({name:"AA"}),e.uri="files/service/fileupload",e.extraHref="id="+arguments[1]._id,e.type="DELETE",API_HELPER.uploadFiles(e,function(e,o){return e?void console.log("error",e):void location.reload()})}else if("actiondownload"==arguments[0].target.id){console.log(arguments[1]);var e={};e.uri="files/service/filedownload",e.extraHref="id="+arguments[1]._id,API_HELPER.downloadFile(e,function(e,o){})}}}})});
</script>
{{{{/raw-helper}}}}